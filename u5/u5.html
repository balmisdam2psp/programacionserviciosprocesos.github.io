<!DOCTYPE html><html><head>
      <title>UD5 Servicios en red</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css">
      
      
      
      
      
      <style>
      @import url(https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css);
code[class*=language-],pre[class*=language-]{color:#333;background:0 0;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.4;-moz-tab-size:8;-o-tab-size:8;tab-size:8;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:.8em;overflow:auto;border-radius:3px;background:#f5f5f5}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal;background:#f5f5f5}.token.blockquote,.token.comment{color:#969896}.token.cdata{color:#183691}.token.doctype,.token.macro.property,.token.punctuation,.token.variable{color:#333}.token.builtin,.token.important,.token.keyword,.token.operator,.token.rule{color:#a71d5d}.token.attr-value,.token.regex,.token.string,.token.url{color:#183691}.token.atrule,.token.boolean,.token.code,.token.command,.token.constant,.token.entity,.token.number,.token.property,.token.symbol{color:#0086b3}.token.prolog,.token.selector,.token.tag{color:#63a35c}.token.attr-name,.token.class,.token.class-name,.token.function,.token.id,.token.namespace,.token.pseudo-class,.token.pseudo-element,.token.url-reference .token.variable{color:#795da3}.token.entity{cursor:help}.token.title,.token.title .token.punctuation{font-weight:700;color:#1d3e81}.token.list{color:#ed6a43}.token.inserted{background-color:#eaffea;color:#55a532}.token.deleted{background-color:#ffecec;color:#bd2c00}.token.bold{font-weight:700}.token.italic{font-style:italic}.language-json .token.property{color:#183691}.language-markup .token.tag .token.punctuation{color:#333}.language-css .token.function,code.language-css{color:#0086b3}.language-yaml .token.atrule{color:#63a35c}code.language-yaml{color:#183691}.language-ruby .token.function{color:#333}.language-markdown .token.url{color:#795da3}.language-makefile .token.symbol{color:#795da3}.language-makefile .token.variable{color:#183691}.language-makefile .token.builtin{color:#0086b3}.language-bash .token.keyword{color:#0086b3}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:hsla(24,20%,50%,.08);background:linear-gradient(to right,hsla(24,20%,50%,.1) 70%,hsla(24,20%,50%,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:hsla(24,20%,50%,.4);color:#f4f1ef;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px #fff}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}html body{font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ol,html body>ul{margin-bottom:16px}html body ol,html body ul{padding-left:2em}html body ol.no-list,html body ul.no-list{padding:0;list-style-type:none}html body ol ol,html body ol ul,html body ul ol,html body ul ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:700;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::after,html body code::before{letter-spacing:-.2em;content:'\00a0'}html body pre>code{padding:0;margin:0;word-break:normal;white-space:pre;background:0 0;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:after,html body pre code:before,html body pre tt:after,html body pre tt:before{content:normal}html body blockquote,html body dl,html body ol,html body p,html body pre,html body ul{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body code,html body pre{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview ul{list-style:disc}.markdown-preview ul ul{list-style:circle}.markdown-preview ul ul ul{list-style:square}.markdown-preview ol{list-style:decimal}.markdown-preview ol ol,.markdown-preview ul ol{list-style-type:lower-roman}.markdown-preview ol ol ol,.markdown-preview ol ul ol,.markdown-preview ul ol ol,.markdown-preview ul ul ol{list-style-type:lower-alpha}.markdown-preview .newpage,.markdown-preview .pagebreak{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center!important}.markdown-preview:not([data-for=preview]) .code-chunk .code-chunk-btn-group{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .status{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .output-div{margin-bottom:16px}.markdown-preview .md-toc{padding:0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link div,.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}.markdown-preview .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0;min-height:100vh}@media screen and (min-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{font-size:14px!important;padding:1em}}@media print{html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc{padding:0 16px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link div,html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% - 300px);padding:2em calc(50% - 457px - 300px / 2);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}@font-face{font-family:"Material Icons";font-style:normal;font-weight:400;src:local("Material Icons"),local("MaterialIcons-Regular"),url("data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAfIAAsAAAAADDAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADMAAABCsP6z7U9TLzIAAAE8AAAARAAAAFZW7kosY21hcAAAAYAAAADTAAACjtP6ytBnbHlmAAACVAAAAxgAAAQ4zRtvlGhlYWQAAAVsAAAALwAAADYRwZsnaGhlYQAABZwAAAAcAAAAJAeKAzxobXR4AAAFuAAAABIAAAA8OGQAAGxvY2EAAAXMAAAAIAAAACAG5AfwbWF4cAAABewAAAAfAAAAIAEfAERuYW1lAAAGDAAAAVcAAAKFkAhoC3Bvc3QAAAdkAAAAYgAAAK2vz7wkeJxjYGRgYOBikGPQYWB0cfMJYeBgYGGAAJAMY05meiJQDMoDyrGAaQ4gZoOIAgCKIwNPAHicY2BkPsQ4gYGVgYOpk+kMAwNDP4RmfM1gxMjBwMDEwMrMgBUEpLmmMDgwVLy4xKzzX4chhrmK4QpQmBEkBwAZygyweJzFkr0NwjAQhZ+TEP6CRUfHBEwRUWaQTICyQbpMwRCskA5RUIONxG0RnnNpKAIV4qzPku/8c353ACYAYrIjCWCuMAh2ptf0/hiL3p/gyPUWa3osqlt0L1zu9r71z8dGrJRykFoauXQd932Lj5vhG+MjxGeYI8MKETObMpslf5EyP8tg+vHun5r539PvlvXzaVhRFVQDTPEWKVQR90KhnnC5Ek67vUKN4VuFasM/ldARj43CCkCsEjpJSoVVgRyU0GVSK6wUpFFCx8lFgX0BiXpRPQB4nE2TTWjcRhTH3xttpDhxN7uxPlp3u/FK7moRPixafRijNosxSw/LUsIwNcaEHPZggo/FmEKMCKWU4kNOOftQSlhE8alnH0Ix9BqWnHooPRrTQ0+mnu2bXTu2pPdGM9LM/6c3fwECTM4gBBMYQNqxzLrZAjqYSlqu2TAHZQA0/DQJH6FtzqGDnvbt4Ggwvzw/nL8EfH8kW0fsuRqhgWXZnY7M1picaUL7Du5BHeDzMIl83dAt016wH1qmvtSMo5R6YRJHTR//FXsff/nj/tc/5K9P5d+nP22+fFK5u7v3K39SW3y+OtDKO3L85vD09PD9z5X17a2N1g4tqk01RlqX7gyoEmnsWQtVr4rtZMmukEaFBZxzefkCn11cyKMLZgshRwgTYNoLNXCBz2ja7HvZG7hDpPSNfoo5vs0knK/9hb+rNpu+8kHPgk/Ao4kK3tWtTpSEtvkA9c+wE6UaUdwieNkaHg55tBEtRiEPw1s0+FtrtTcc9two2lhMknV7PZF/cs6+uUFTmpTGbEx7sQCPSLOttHS3GRltqp7SNzVSKzl6aWnZT/CX5k6/v9N3Hh8fHBwffJVjhrC6OgH5dkIt/tPsq+d/PD5Qz7G7efzq1THFjdZVPe/N6ulQ3JnDWSE5junsFsVIiFwL/htf1S5gJ3BfOcUxfHKLnzqpFpyfZ9cX+/5WB6a+Y0pHpzkNrYNVDwMsikK+y7WuLCRg/oFHkA8VT3rDg5ZnU6ktzzINymV0m74Xd5pfIGXyFeVEQSShkzqG7TBBa2OxVRKitLXv7h3uuftXnXq7lz2tZ/WnWa9dx9dCjDhHzmuVQATlmljr9dZErUydSo2Hbi/b1vXtrOeGCk2/8s3ZlO8+ueJT8BVlw5pGw2oYccdSiHHqx0RlabHqdNR9jAETl6PreJcPBnnfpTLnOQ8C3OV8AmQGzouV1iZdeb5SSIoVc8W8/kcDtksUH5FrU6/aqBqNWcMEzxG4DAQ14qRQhi9mWU0rzepKezbjfgCwQKxVYq5ajRgpRqy45CqwkJydcEkbTkvRz8P5/2ZpDTN4nGNgZGBgAOKb6v+/xvPbfGXgZmEAgeuB2kkI+v8bFgbmKiCXg4EJJAoAPyAKhQB4nGNgZGBg1vmvwxDDwgACQJKRARXwAwAzZQHQeJxjYQCCFAYGFgbSMQAcWACdAAAAAAAAAAwALgBgAIQAmADSAQgBIgE8AVABoAHeAfwCHHicY2BkYGDgZ7BgYGMAASYg5gJCBob/YD4DAA/hAWQAeJxlkbtuwkAURMc88gApQomUJoq0TdIQzEOpUDokKCNR0BuzBiO/tF6QSJcPyHflE9Klyyekz2CuG8cr7547M3d9JQO4xjccnJ57vid2cMHqxDWc40G4Tv1JuEF+Fm6ijRfhM+oz4Ra6eBVu4wZvvMFpXLIa40PYQQefwjVc4Uu4Tv1HuEH+FW7i1mkKn6Hj3Am3sHC6wm08Ou8tpSZGe1av1PKggjSxPd8zJtSGTuinyVGa6/Uu8kxZludCmzxMEzV0B6U004k25W35fj2yNlCBSWM1paujKFWZSbfat+7G2mzc7weiu34aczzFNYGBhgfLfcV6iQP3ACkSaj349AxXSN9IT0j16JepOb01doiKbNWt1ovippz6sVYYwsXgX2rGVFIkq7Pl2PNrI6qW6eOshj0xaSq9mpNEZIWs8LZUfOouNkVXxp/d5woqebeYIf4D2J1ywQB4nG3LOw6AIBAE0B384B+PAkgEa+QwNnYmHt+EpXSal5lkSBBnoP8oCFSo0aCFRIceA0ZMmLFAYSW88rmvtMUjG3RiQ9HvpfusM6zWNmtc5H/iPewha50tOt5PS/QBx2IeSwAA") format("woff")}.admonition{box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12),0 3px 1px -2px rgba(0,0,0,.2);position:relative;margin:1.5625em 0;padding:0 1.2rem;border-left:.4rem solid rgba(68,138,255,.8);border-radius:.2rem;background-color:rgba(255,255,255,.05);overflow:auto}.admonition>p{margin-top:.8rem}.admonition>.admonition-title{margin:0 -1.2rem;padding:.8rem 1.2rem .8rem 3.6rem;border-bottom:1px solid rgba(68,138,255,.2);background-color:rgba(68,138,255,.1);font-weight:700}.admonition>.admonition-title:before{position:absolute;left:1.2rem;font-size:1.5rem;color:rgba(68,138,255,.8);content:"\E3C9"}.admonition>.admonition-title:before{font-family:Material Icons;font-style:normal;font-variant:normal;font-weight:400;line-height:2rem;text-transform:none;white-space:nowrap;speak:none;word-wrap:normal;direction:ltr}.admonition.abstract,.admonition.summary,.admonition.tldr{border-left-color:rgba(0,176,255,.8)}.admonition.abstract>.admonition-title,.admonition.summary>.admonition-title,.admonition.tldr>.admonition-title{background-color:rgba(0,176,255,.1);border-bottom-color:rgba(0,176,255,.2)}.admonition.abstract>.admonition-title:before,.admonition.summary>.admonition-title:before,.admonition.tldr>.admonition-title:before{color:#00b0ff;content:"\E8D2"}.admonition.hint,.admonition.tip{border-left-color:rgba(0,191,165,.8)}.admonition.hint>.admonition-title,.admonition.tip>.admonition-title{background-color:rgba(0,191,165,.1);border-bottom-color:rgba(0,191,165,.2)}.admonition.hint>.admonition-title:before,.admonition.tip>.admonition-title:before{color:#00bfa5;content:"\E80E"}.admonition.info,.admonition.todo{border-left-color:rgba(0,184,212,.8)}.admonition.info>.admonition-title,.admonition.todo>.admonition-title{background-color:rgba(0,184,212,.1);border-bottom-color:rgba(0,184,212,.2)}.admonition.info>.admonition-title:before,.admonition.todo>.admonition-title:before{color:#00b8d4;content:"\E88E"}.admonition.check,.admonition.done,.admonition.success{border-left-color:rgba(0,200,83,.8)}.admonition.check>.admonition-title,.admonition.done>.admonition-title,.admonition.success>.admonition-title{background-color:rgba(0,200,83,.1);border-bottom-color:rgba(0,200,83,.2)}.admonition.check>.admonition-title:before,.admonition.done>.admonition-title:before,.admonition.success>.admonition-title:before{color:#00c853;content:"\E876"}.admonition.faq,.admonition.help,.admonition.question{border-left-color:rgba(100,221,23,.8)}.admonition.faq>.admonition-title,.admonition.help>.admonition-title,.admonition.question>.admonition-title{background-color:rgba(100,221,23,.1);border-bottom-color:rgba(100,221,23,.2)}.admonition.faq>.admonition-title:before,.admonition.help>.admonition-title:before,.admonition.question>.admonition-title:before{color:#64dd17;content:"\E887"}.admonition.attention,.admonition.caution,.admonition.warning{border-left-color:rgba(255,145,0,.8)}.admonition.attention>.admonition-title,.admonition.caution>.admonition-title,.admonition.warning>.admonition-title{background-color:rgba(255,145,0,.1);border-bottom-color:rgba(255,145,0,.2)}.admonition.attention>.admonition-title:before{color:#ff9100;content:"\E417"}.admonition.caution>.admonition-title:before,.admonition.warning>.admonition-title:before{color:#ff9100;content:"\E002"}.admonition.fail,.admonition.failure,.admonition.missing{border-left-color:rgba(255,82,82,.8)}.admonition.fail>.admonition-title,.admonition.failure>.admonition-title,.admonition.missing>.admonition-title{background-color:rgba(255,82,82,.1);border-bottom-color:rgba(255,82,82,.2)}.admonition.fail>.admonition-title:before,.admonition.failure>.admonition-title:before,.admonition.missing>.admonition-title:before{color:#ff5252;content:"\E14C"}.admonition.bug,.admonition.danger,.admonition.error{border-left-color:rgba(255,23,68,.8)}.admonition.bug>.admonition-title,.admonition.danger>.admonition-title,.admonition.error>.admonition-title{background-color:rgba(255,23,68,.1);border-bottom-color:rgba(255,23,68,.2)}.admonition.danger>.admonition-title:before{color:#ff1744;content:"\E3E7"}.admonition.error>.admonition-title:before{color:#ff1744;content:"\E14C"}.admonition.bug>.admonition-title:before{color:#ff1744;content:"\E868"}.admonition.example,.admonition.snippet{border-left-color:rgba(0,184,212,.8)}.admonition.example>.admonition-title,.admonition.snippet>.admonition-title{background-color:rgba(0,184,212,.1);border-bottom-color:rgba(0,184,212,.2)}.admonition.example>.admonition-title:before,.admonition.snippet>.admonition-title:before{color:#00b8d4;content:"\E242"}.admonition.cite,.admonition.quote{border-left-color:rgba(158,158,158,.8)}.admonition.cite>.admonition-title,.admonition.quote>.admonition-title{background-color:rgba(158,158,158,.1);border-bottom-color:rgba(158,158,158,.2)}.admonition.cite>.admonition-title:before,.admonition.quote>.admonition-title:before{color:#9e9e9e;content:"\E244"}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */

@font-face {
  font-family: 'Catamaran';
  font-style: normal;
  font-weight: 400;
  src: url(https://fonts.gstatic.com/s/catamaran/v27/o-0bIpQoyXQa2RxT7-5B6Ryxs2E_6n1iPHjd5a7dvg.ttf) format('truetype');
}
.markdown-preview.markdown-preview .box_bg_lightgrey {
  background-color: #f5f5f5;
  border: 2px solid #969696;
  padding: 15px;
  margin-top: 15px;
  margin-bottom: 15px;
  border-radius: 5px;
  box-shadow: 0 0 7px 0 rgba(78, 120, 158, 0.1);
}
.markdown-preview.markdown-preview .box_bg_lightgreen {
  background-color: #f5faf5;
  border: 2px solid #969b96;
  padding-left: 15px;
  padding-right: 15px;
  margin-top: 15px;
  margin-bottom: 15px;
  border-radius: 5px;
  box-shadow: 0 0 7px 0 rgba(78, 120, 158, 0.1);
}
.markdown-preview.markdown-preview .contenedor {
  display: flex;
  justify-content: center;
  margin: 30px auto 30px auto;
}
.markdown-preview.markdown-preview .fondo {
  background: url(https://balmisdigigs.github.io/digitalizacion.github.io/imagenes/fondos/quote.png);
  background-size: cover;
  width: 75%;
  height: 160px;
  border-radius: 10px;
  position: relative;
}
.markdown-preview.markdown-preview .cita {
  font-family: Arial;
  font-style: italic;
  font-weight: 600;
  text-align: justify;
  line-height: 1.5rem;
  opacity: 0.6;
  color: white;
  padding: 5rem;
  position: relative;
  top: 50%;
  left: 50%;
  font-size: 1.3rem;
  transform: translate(-50%, -50%);
}
.markdown-preview.markdown-preview .abre_comilla {
  font-family: "Catamaran";
  font-weight: 600;
  color: white;
  padding-left: 30px;
  position: absolute;
  font-size: 6rem;
  transform: translate(0%, -15%);
}
.markdown-preview.markdown-preview .cierra_comilla {
  font-family: "Catamaran";
  font-weight: 600;
  color: white;
  padding-right: 30px;
  right: 0%;
  position: absolute;
  font-size: 6rem;
  transform: translate(0%, 55%);
}
.markdown-preview.markdown-preview .autor {
  font-family: Arial;
  color: white;
  margin: 0px;
  padding-left: 30px;
  position: absolute;
  top: 83%;
  font-size: 1rem;
}
.markdown-preview.markdown-preview .flotante {
  display: flex;
  margin-top: 15px;
  margin-bottom: 15px;
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante {
    justify-content: center;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante {
    justify-content: space-between;
  }
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante {
    flex-direction: column;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante {
    flex-direction: row;
  }
}
.markdown-preview.markdown-preview .flotante_izq {
  margin-right: 15px;
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante_izq {
    width: 100%;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante_izq {
    width: auto;
  }
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .flotante_der {
    width: 100%;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .flotante_der {
    width: auto;
  }
}
.markdown-preview.markdown-preview .galeria_imagenes {
  display: flex;
  justify-content: space-evenly;
  align-items: center;
  margin-top: 15px;
  margin-bottom: 15px;
}
@media (max-width: 550px) {
  .markdown-preview.markdown-preview .galeria_imagenes {
    flex-direction: column;
  }
}
@media (min-width: 550px) {
  .markdown-preview.markdown-preview .galeria_imagenes {
    flex-direction: row;
  }
}

      </style>
      <!-- The content below will be included at the end of the <head> element. --><script type="text/javascript">
  const configureMermaidIconPacks = () => {
    window["mermaid"].registerIconPacks([
      {
        name: "logos",
        loader: () =>
          fetch("https://unpkg.com/@iconify-json/logos@1/icons.json").then(
            (res) => res.json()
          ),
      },
    ]);
  };

  if (document.readyState !== 'loading') {
    configureMermaidIconPacks();
  } else {
    document.addEventListener("DOMContentLoaded", () => {
      configureMermaidIconPacks();
    });
  }
</script></head><body for="html-export">
    
    
      <div class="crossnote markdown-preview  ">
      
<h1 id="unidad-5-servicios-en-red">Unidad 5. Servicios en red </h1>
<p><a href="./u5.pdf">Descargar estos apuntes</a></p>
<h2 id="índice">Índice </h2>

<div class="md-toc">
<div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:18px">
          <a href="#introducción" class="md-toc-link">
            <p>Introducción</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:18px">
          <a href="#objetivos" class="md-toc-link">
            <p>Objetivos</p>

          </a></div><details style="padding:0;;padding-left:0px;" open="">
        <summary class="md-toc-link-wrapper">
          <a href="#correo" class="md-toc-link"><p>Correo</p>
</a>
          </summary>
        <div>
          <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#jakarta-mail" class="md-toc-link">
            <p>Jakarta Mail</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#clases-principales-de-la-api-jakarta-mail" class="md-toc-link">
            <p>Clases principales de la API Jakarta Mail</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#enviar-correos-electrónicos-básicos-en-jakarta-mail" class="md-toc-link">
            <p>Enviar correos electrónicos básicos en Jakarta Mail</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#enviar-mensajes-html" class="md-toc-link">
            <p>Enviar mensajes HTML</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#enviar-correo-electrónico-con-archivos-adjuntos" class="md-toc-link">
            <p>Enviar correo electrónico con archivos adjuntos</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#enviar-correos-electrónicos-html-con-imágenes" class="md-toc-link">
            <p>Enviar correos electrónicos HTML con imágenes</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#lectura-de-emails-con-jakarta-mail" class="md-toc-link">
            <p>Lectura de emails con Jakarta Mail</p>

          </a></div>
        </div>
      </details>
    
</div>
<div style="page-break-after:always;"></div>
<h2 id="introducción">Introducción </h2>
<p>Los servicios son programas auxiliares utilizados en un sistema para gestionar una colección de recursos y prestar su funcionalidad a los usuario y aplicaciones.</p>
<p>El acceso a los servicios está formado por el conjunto de operaciones que ofrece, por ejemplo, un servicio de archivos ofrece operaciones de lectura, escritura y borrado de ficheros.</p>
<p>Todos los servicios de Internet implementan una relación cliente-servidor. Existen multitud de librerías para trabajar con los servicios más comunes. En esta unidad nos vamos a centrar en el servicio FTP (transferencia de archivos), SMTP (envío de emails) y POP3/IMAP (lectura de emails).</p>
<p>Además, hay otras aproximaciones, también basadas en la arquitectura cliente-servidor que permiten ofrecer acceso a los sistemas. Entre los más utilizados, está lo que se denomina API Rest, que no deja de ser un servicio sobre HTTP que permite interactuar con el backend de los sistemas, de forma independiente a la arquitectura y lenguajes utilizados en el frontend.</p>
<p>Nosotros vamos a analizar en esta unidad otras aproximaciones como los sistemas de colas, basados en el protocolo MQ, o los sistemas serverless que ofrecen las principales plataformas de computación en la nube (Azure Functions, AWS Lambda y Google Cloud Functions).</p>
<h2 id="objetivos">Objetivos </h2>
<p>Objetivos de esta unidad:</p>
<ul>
<li>Utilizar librerías Java para usar los protocolos de aplicación más importantes de TCP/IP.</li>
<li>Probar servicios de comunicación en red.</li>
<li>Permitir operaciones en la nube de forma sencilla.</li>
<li>Crear aplicaciones que permitan una comunicación asíncrona entre clientes y entre clientes y servidores.</li>
</ul>
<div style="page-break-after:always;"></div>
<h2 id="correo">Correo </h2>
<h3 id="jakarta-mail">Jakarta Mail </h3>
<p>Al buscar en Internet tutoriales sobre el envío de correos electrónicos usando Java, existe una alta probabilidad de que cada uno mencione algo llamado <code>Jakarta Mail</code> o <code>Java Mail</code>.</p>
<p>Durante mucho tiempo, Java Enterprise Edition (comúnmente conocido como Java EE), ha sido la plataforma de facto para desarrollar aplicaciones de misión crítica.</p>
<p>Recientemente, con el fin de impulsar la creación de aplicaciones nativas de la nube, varios proveedores de software prominentes se unieron para transferir tecnologías Java EE a la Fundación Eclipse, que es una organización sin fines de lucro encargada de administrar las actividades de la comunidad de software de código abierto Eclipse.</p>
<blockquote>
<p><strong>En consecuencia, Java EE ha sido renombrado a Jakarta EE.</strong></p>
</blockquote>
<p>A pesar del cambio de nombre, todas las clases principales y definiciones de propiedades siguen siendo las mismas tanto para Jakarta Mail como para JavaMail.</p>
<div class="admonition tip">
<p class="admonition-title">Jakarta vs Java Mail</p>
<p>Para evitar confusiones, es importante tener en cuenta que JavaMail es solo el nombre anterior de Jakarta Mail y los dos representan el mismo software.</p>
</div>
<p>Entonces, Jakarta Mail, o JavaMail como a algunos todavía les gusta llamarlo, es una API para enviar y recibir correos electrónicos a través de <strong>SMTP</strong>, <strong>POP3</strong>, así como <strong>IMAP</strong> y es la opción más popular que también admite la autenticación TLS y SSL. Es independiente de la plataforma, independiente del protocolo e integrado en la plataforma Jakarta EE.</p>
<p>También puede encontrar Jakarta Mail como un paquete opcional para su uso con la plataforma Java SE.</p>
<h4 id="uso-de-la-librería">Uso de la librería </h4>
<blockquote>
<p><a href="https://jakarta.ee/specifications/mail/2.1/jakarta-mail-spec-2.1">JakartaMail API</a> es la especificación de la API de correo de Jakarta. La implementación de referencia de esta especificación se puede encontrar en el repositorio de GitHub <a href="https://jakartaee.github.io/mail-api/">Jakarta Mail Specification</a>.</p>
</blockquote>
<div class="admonition danger">
<p class="admonition-title">JavaMail API</p>
<p>Como su nombre indica, JavaMail API es una API, no una implementación. Por lo tanto, no puede usarlo directamente en su proyecto. En cambio, debe usar una implementación de la API de correo de Jakarta, como la implementación de referencia de la especificación de la API de correo de Jakarta.</p>
</div>
<p>También puede encontrar el archivo jakarta.mail-api-X.Y.Z.jar en el repositorio de Maven y agregarlo con dependencias <code>Maven</code>:</p>
<pre data-role="codeBlock" data-info="xml:no-line-numbers" class="language-xml:no-line-numbers xml:no-line-numbers"><code>    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.eclipse.angus&lt;/groupId&gt;
            &lt;artifactId&gt;angus-mail&lt;/artifactId&gt;
            &lt;version&gt;2.0.2&lt;/version&gt;
            &lt;type&gt;jar&lt;/type&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;jakarta.mail&lt;/groupId&gt;
            &lt;artifactId&gt;jakarta.mail-api&lt;/artifactId&gt;
            &lt;version&gt;2.1.2&lt;/version&gt;
            &lt;type&gt;jar&lt;/type&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
</code></pre><div class="admonition info">
<p class="admonition-title">Implementaciones de Jakarta Mail</p>
<p>En el ejemplo anterior hemos usado la implementación de Jakarta AngusMail, pero se pueden usar otras como la propia de Oracle, simplemente cambiando la dependencia.</p>
<pre data-role="codeBlock" data-info="xml:no-line-numbers" class="language-xml:no-line-numbers xml:no-line-numbers"><code>        &lt;dependency&gt;
            &lt;groupId&gt;com.sun.mail&lt;/groupId&gt;
            &lt;artifactId&gt;jakarta.mail&lt;/artifactId&gt;
            &lt;version&gt;2.0.1&lt;/version&gt;
        &lt;/dependency&gt;        
</code></pre><p>Al ser una implementación del API propuesta por Jakarta, el código debería funcionar sin cambios.</p>
</div>
<h3 id="clases-principales-de-la-api-jakarta-mail">Clases principales de la API Jakarta Mail </h3>
<p>La API de correo de Jakarta tiene una amplia gama de clases e interfaces que se pueden usar para enviar, leer y realizar otras acciones con mensajes de correo electrónico, al igual que en un sistema de correo típico.</p>
<p>Aunque hay varios paquetes en el Proyecto de Correo de Jakarta, dos de los más utilizados son <code>jakarta.mail</code> y <code>jakarta.mail.internet</code>.</p>
<p>El paquete <strong>jakarta.mail</strong> proporciona clases que modelan un sistema de correo y el paquete <strong>jakarta.mail.internet</strong> proporciona clases que se centran en los sistemas de correo de Internet.</p>
<p>A continuación tenemos una descripción de las clases principales de cada uno de los paquetes:</p>
<h4 id="jakartamailsession">jakarta.mail.Session </h4>
<p>La clase Session, que no tiene subclases, es la <em>clase de nivel superior de la API de correo de Jakarta</em>. Es un objeto multiproceso que actúa como fábrica de conexiones para la API de correo de Jakarta. además de recopilar las propiedades y los valores predeterminados de la API de correo, <strong>es responsable de los ajustes de configuración y la autenticación</strong>.</p>
<p>Para obtener el objeto Session, puede llamar a cualquiera de los dos métodos siguientes:</p>
<ul>
<li>getDefaultInstance(), que devuelve la sesión predeterminada</li>
<li>getInstance(), que devuelve una nueva sesión</li>
</ul>
<h4 id="jakartamailmessage">jakarta.mail.Message </h4>
<p>La clase Message es una <em>clase abstracta</em> que modela un mensaje de correo electrónico; Sus subclases soportan las implementaciones reales. Por lo general, su <code>subclase MimeMessage</code> <em>(jakarta.mail.internet.MimeMessage)</em> se utiliza para preparar los detalles del mensaje de correo electrónico que se enviará. <strong>Un MimeMessage es un mensaje de correo electrónico que utiliza el estilo de formato MIME (Multipurpose Internet Mail Extension)</strong> definido en el RFC822.</p>
<p>Estos son algunos de los métodos más utilizados de la clase MimeMessage:</p>
<table>
<thead>
<tr>
<th style="text-align:left">Método</th>
<th style="text-align:left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">setFrom(Address addresses)</td>
<td style="text-align:left">Se utiliza para establecer el campo de encabezado "De".</td>
</tr>
<tr>
<td style="text-align:left">setRecipients(Message.RecipientType type, String addresses)</td>
<td style="text-align:left">Se utiliza para establecer el tipo de destinatario indicado en las direcciones proporcionadas. Los posibles tipos de direcciones definidos son "Para" (<a href="http://Message.RecipientType.TO">Message.RecipientType.TO</a>), "CC" (<a href="http://Message.RecipientType.CC">Message.RecipientType.CC</a>) y "CCO" (Message.RecipientType.BCC).</td>
</tr>
<tr>
<td style="text-align:left">setSubject(String subject)</td>
<td style="text-align:left">Se utiliza para establecer el campo de encabezado del asunto del correo electrónico.</td>
</tr>
<tr>
<td style="text-align:left">setText(String text)</td>
<td style="text-align:left">Se utiliza para establecer la cadena proporcionada como contenido del correo electrónico, utilizando el tipo MIME de "texto / sin formato".</td>
</tr>
<tr>
<td style="text-align:left">setContent(Object message, String contentType)</td>
<td style="text-align:left">Se utiliza para establecer el contenido del correo electrónico y se puede utilizar con un tipo MIME que no sea "text/html".</td>
</tr>
</tbody>
</table>
<h4 id="jakartamailaddress">jakarta.mail.Address </h4>
<p>La clase Address es una <em>clase abstracta</em> que modela las direcciones (direcciones To y From) en un mensaje de correo electrónico; Sus subclases soportan las implementaciones reales. Por lo general, su <code>subclase InternetAddress</code>, que denota una dirección de correo electrónico de Internet, es la que mas se usa.</p>
<h4 id="jakartamailauthenticator">jakarta.mail.Authenticator </h4>
<p>La clase Authenticator es una <em>clase abstracta</em> que se utiliza para obtener autenticación para acceder a los recursos del servidor de correo, a menudo requiriendo la información del usuario. Por lo general, su <code>subclase PasswordAuthentication</code> es la que mas se usa.</p>
<h4 id="jakartamailtransport">jakarta.mail.Transport </h4>
<p>La clase Transport es una <em>clase abstracta</em> que utiliza el <code>protocolo SMTP</code> para enviar y transportar mensajes de correo electrónico.</p>
<h3 id="enviar-correos-electrónicos-básicos-en-jakarta-mail">Enviar correos electrónicos básicos en Jakarta Mail </h3>
<p>Básicamente, estos son los pasos para enviar un email utilizando la API de correo de Jakarta:</p>
<ol>
<li>Configurar detalles del servidor SMTP utilizando un <strong>objeto Java Properties</strong>. Puede obtener detalles del servidor SMTP de su proveedor de servicios de correo electrónico.</li>
<li>Crear un objeto Session llamando al método getInstance(). Luego, pasar el <code>nombre de usuario y contraseña de la cuenta</code> a PasswordAuthentication. Al crear el objeto de sesión, siempre debe registrar el <em>Authenticator</em> con la sesión.</li>
<li>Una vez creado el objeto Session, el siguiente paso es crear el email que se enviará. Para ello, empezaremos pasando el objeto de sesión creado al constructor de clase MimeMessage.</li>
<li>A continuación, después de crear el objeto de mensaje, establecer los campos De, Para y Asunto del email.</li>
<li>Utilizar el método <code>setText()</code> para establecer el contenido del mensaje de correo electrónico.</li>
<li>Utilizar el objeto Transport para enviar el correo.</li>
<li>Agregue excepciones para recuperar los detalles de cualquier posible error al enviar el mensaje.</li>
</ol>
<h4 id="preparación-de-la-sesión">Preparación de la sesión </h4>
<p>El primer paso es obtener el objeto de sesión de correo. La clase <em>Session</em> es una clase singleton. Por lo tanto, no se puede crear directamente una instancia de la misma. Debemos llamar a uno de los métodos estáticos sobrecargados, generalmente <code>getInstance()</code>.</p>
<div class="admonition info">
<p class="admonition-title">Archivos/Objetos Properties</p>
<p>Un archivo de propiedades es un archivo de texto que contiene pares clave-valor para los valores de configuración de un proyecto.</p>
<p>Se pueden crear sobre la marcha como en los siguientes ejemplos, pero también se puede leer desde un archivo en el proyecto (esta es la forma preferida).</p>
<p>Aquí puedes encontrar algunos enlaces para echar un vistazo a cómo usar y acceder a estos archivos</p>
<ul>
<li><a href="https://www.arquitecturajava.com/java-properties-files-y-como-usarlos/">Java Properties Files y como usarlos - Arquitectura Java</a></li>
<li><a href="https://www.baeldung.com/java-properties">Getting started with Java properties  - Baeldung</a></li>
<li><a href="https://www.javatpoint.com/properties-class-in-java">Properties class in Java - javaTpoint</a></li>
</ul>
<p><img src="./assets/imgs/propertiesfile.png" alt="http://www.instanceofjava.com/2018/01/how-to-read-values-from-properties-file.html"></p>
<p>En la imagen anterior puedes ver dónde colocar el archivo de propiedades en un proyecto 'Maven'.</p>
</div>
<pre data-role="codeBlock" data-info="java" class="language-java java"><code><span class="token comment">// Prepare SMTP configuration into a Property object</span>
<span class="token keyword keyword-final">final</span> <span class="token class-name">Properties</span> prop <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
prop<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"mail.smtp.username"</span><span class="token punctuation">,</span> <span class="token string">"usuario@gmail.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
prop<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"mail.smtp.password"</span><span class="token punctuation">,</span> <span class="token string">"passwordEmail"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
prop<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"mail.smtp.host"</span><span class="token punctuation">,</span> <span class="token string">"smtp.gmail.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
prop<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"mail.smtp.port"</span><span class="token punctuation">,</span> <span class="token string">"587"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
prop<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"mail.smtp.auth"</span><span class="token punctuation">,</span> <span class="token string">"true"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
prop<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"mail.smtp.starttls.enable"</span><span class="token punctuation">,</span> <span class="token string">"true"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// TLS</span>

<span class="token comment">// Create the Session with the user credentials</span>
<span class="token class-name">Session</span> mailSession <span class="token operator">=</span> <span class="token class-name">Session</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span>prop<span class="token punctuation">,</span> <span class="token keyword keyword-new">new</span> <span class="token class-name"><span class="token namespace">jakarta<span class="token punctuation">.</span>mail<span class="token punctuation">.</span></span>Authenticator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword keyword-protected">protected</span> <span class="token class-name">PasswordAuthentication</span> <span class="token function">getPasswordAuthentication</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-return">return</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">PasswordAuthentication</span><span class="token punctuation">(</span>prop<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"mail.smtp.username"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
                    prop<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"mail.smtp.password"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>En el código anterior, acabamos de crear el objeto Session con propiedades y el objeto Authenticator.</p>
<p>Las propiedades son las siguientes.</p>
<ul>
<li>mail.smtp.username – Nombre de usuario para acceder al servidor SMTP</li>
<li>mail.smtp.password – Contraseña de acceso al servidor SMTP</li>
<li>mail.smtp.host – Host del servidor SMTP</li>
<li>mail.smtp.port – Puerto</li>
<li>mail.smtp.auth – Se requiere autenticación.</li>
<li>mail.smtp.starttls.enable – TLS habilitado o no.</li>
</ul>
<p>El Authenticator es una clase abstracta. Su objeto se crea proporcionando una implementación anónima del método <code>getPasswordAuthentication()</code>. La clase <em>PasswordAuthentication</em> se utiliza como marcador para almacenar credenciales de usuario.</p>
<p>Este es un código de ejemplo para leer las propiedades de un archivo en el proyecto.</p>
<pre data-role="codeBlock" data-info="java" class="language-java java"><code>    <span class="token keyword keyword-private">private</span> <span class="token keyword keyword-void">void</span> <span class="token function">loadSMTPConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-try">try</span> <span class="token punctuation">(</span> <span class="token class-name">InputStream</span> input <span class="token operator">=</span> <span class="token keyword keyword-this">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">"/"</span> <span class="token operator">+</span> propertiesFile<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

            smtpConfiguration <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// load a properties file</span>
            smtpConfiguration<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// get the property value and print it out</span>
            smtpConfiguration<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Key : "</span> <span class="token operator">+</span> key <span class="token operator">+</span> <span class="token string">", Value : "</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span> <span class="token keyword keyword-catch">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Cant open properties file: "</span> <span class="token operator">+</span> ex<span class="token punctuation">.</span><span class="token function">getLocalizedMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>    
</code></pre><p>El contenido del archivo de propiedades podría ser así</p>
<pre data-role="codeBlock" data-info="txt" class="language-txt txt"><code># Data to send emails from a GMAIL account
mail.from=cuenta@iesdoctorbalmis.com ó cuenta@gmail.com
mail.smtp.username=cuenta@iesdoctorbalmis.com
mail.smtp.password=***contraseña de la cuenta habilitando apps poco seguras o contraseña de app con 2FA***

mail.smtp.host=smtp.gmail.com
mail.smtp.port=587
mail.smtp.auth=true
mail.smtp.starttls.enable=true
</code></pre><h4 id="composición-del-mensaje-texto-sin-formato">Composición del mensaje (texto sin formato) </h4>
<p>A continuación, redactaremos el mensaje de correo electrónico. La clase jakarta.mail.Message representa un mensaje en Java mail API. Dado que es una clase abstracta, usaremos su clase de implementación concreta <code>jakarta.mail.internet.MimeMessage</code>. Java Mail API permite enviar correo en texto plano o en contenido HTML. Comencemos enviando un mensaje de texto sin formato.</p>
<pre data-role="codeBlock" data-info="java{highlight=8}" class="language-java java" data-line="8"><code><span class="token comment">// Prepare the MimeMessage</span>
<span class="token class-name">Message</span> message <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">MimeMessage</span><span class="token punctuation">(</span>mailSession<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Set From and subject email properties</span>
message<span class="token punctuation">.</span><span class="token function">setFrom</span><span class="token punctuation">(</span><span class="token keyword keyword-new">new</span> <span class="token class-name">InternetAddress</span><span class="token punctuation">(</span><span class="token string">"no-reply@gmail.com"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
message<span class="token punctuation">.</span><span class="token function">setSubject</span><span class="token punctuation">(</span><span class="token string">"Sending Mail with pure Java Mail API "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Set to, cc &amp; bcc recipients        </span>
<span class="token class-name">InternetAddress</span><span class="token punctuation">[</span><span class="token punctuation">]</span> toEmailAddresses <span class="token operator">=</span> 
        <span class="token class-name">InternetAddress</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">"user1@gmail.com, user2@gmail.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">InternetAddress</span><span class="token punctuation">[</span><span class="token punctuation">]</span> ccEmailAddresses <span class="token operator">=</span> 
        <span class="token class-name">InternetAddress</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">"user21@gmail.com, user22@gmail.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">InternetAddress</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bccEmailAddresses <span class="token operator">=</span> 
        <span class="token class-name">InternetAddress</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">"user31@gmail.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
message<span class="token punctuation">.</span><span class="token function">setRecipients</span><span class="token punctuation">(</span><span class="token class-name">Message<span class="token punctuation">.</span>RecipientType</span><span class="token punctuation">.</span><span class="token constant">TO</span><span class="token punctuation">,</span>toEmailAddresses<span class="token punctuation">)</span><span class="token punctuation">;</span>
message<span class="token punctuation">.</span><span class="token function">setRecipients</span><span class="token punctuation">(</span><span class="token class-name">Message<span class="token punctuation">.</span>RecipientType</span><span class="token punctuation">.</span><span class="token constant">CC</span><span class="token punctuation">,</span>ccEmailAddresses<span class="token punctuation">)</span><span class="token punctuation">;</span>
message<span class="token punctuation">.</span><span class="token function">setRecipients</span><span class="token punctuation">(</span><span class="token class-name">Message<span class="token punctuation">.</span>RecipientType</span><span class="token punctuation">.</span><span class="token constant">BCC</span><span class="token punctuation">,</span>bccEmailAddresses<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/* Mail body with plain Text */</span>
message<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"Hello User,"</span> 
        <span class="token operator">+</span> <span class="token string">"\n\n If you read this, means mail sent with Java Mail API is successful"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code><div class="line-highlight-wrapper">






<div aria-hidden="true" class="line-highlight" data-range="8" data-start="8">
</div></div></pre><blockquote>
<p><strong>Para enviar un correo electrónico en texto sin formato, simplemente pasamos el texto en el método message.setText().</strong></p>
</blockquote>
<h4 id="enviar-mensaje">Enviar mensaje </h4>
<p>Hasta ahora, hemos creado una sesión y redactado el mensaje. Ahora es el momento de enviar el mensaje a los destinatarios. Usaremos la clase jakarta.mail.Transport para hacerlo. La clase proporciona métodos <code>send()</code> sobrecargados.</p>
<pre data-role="codeBlock" data-info="java" class="language-java java"><code>    <span class="token comment">// Send the configured message in the session</span>
    <span class="token class-name">Transport</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="admonition info">
<p class="admonition-title">Emails temporales</p>
<p><a href="http://www.yopmail.com/en/">YopMail</a> es un servicio de correo electrónico temporal que se puede utilizar para recibir correos electrónicos de forma anónima. No se requiere registro para usar el servicio. Puede usar cualquier dirección de correo electrónico de su elección para recibir correos electrónicos. El servicio es gratuito y se puede utilizar para recibir correos electrónicos de forma anónima. El servicio es gratuito y se puede utilizar para recibir correos electrónicos de forma anónima.</p>
</div>
<h3 id="enviar-mensajes-html">Enviar mensajes HTML </h3>
<p>En términos de usabilidad, el contenido HTML es muy superior al texto sin formato. Por lo tanto, la mayoría de las veces enviamos emails en formato HTML. Java Mail API admite el envío de correos electrónicos en formato HTML. Para enviar un correo electrónico con contenido HTML, debemos  reemplazar el método message.setText() con el siguiente código.</p>
<pre data-role="codeBlock" data-info="java" class="language-java java"><code><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
message<span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span><span class="token string">"Just discovered that Jakarta Mail is fun and easy to use"</span><span class="token punctuation">,</span> 
<span class="token string">"text/html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre><blockquote>
<p>usaremos el método <strong>setContent()</strong> para establecer el contenido y especificar <code>"text/html"</code> en el segundo argumento, lo que indica que el mensaje tiene formato HTML.</p>
</blockquote>
<h3 id="enviar-correo-electrónico-con-archivos-adjuntos">Enviar correo electrónico con archivos adjuntos </h3>
<p>Además de los pasos mencionados anteriormente, estos son los diferentes pasos involucrados en el uso de la API de correo de Jakarta para enviar archivos adjuntos de correo electrónico:</p>
<ol>
<li>Creamos una instancia del objeto <code>MimeMultipart</code> que se utilizará como envoltorio o <em>wrapper</em> para las distintas partes <em>MimeBodyPart</em>. <strong>Un <em>MultiPart</em> actúa como un contenedor que guarda varias partes individuales</strong>, y viene con métodos para obtener y configurar sus diversas subpartes.</li>
<li>Luego, establecemos la primera parte del objeto <em>Multipart</em> pasándole el mensaje real.</li>
<li>A continuación, establecemos la segunda y las siguientes parte del objeto <em>Multipart</em> agregando los datos adjuntos.</li>
<li>Incluimos el objeto <em>Multipart</em> en el mensaje a enviar.</li>
<li>Enviamos el mensaje</li>
</ol>
<p><img src="./assets/imgs/e-mail_multipart_structure.png" alt="Estructura del mensaje MIME Multipart" style="display:block;margin:0 auto;width:75%;max-width:400px;"></p>
<pre data-role="codeBlock" data-info="java{highlight=[2,5,9,12,16,19]}" class="language-java java" data-line="2,5,9,12,16,19"><code> <span class="token comment">// create an instance of multipart object</span>
<span class="token class-name">Multipart</span> multipart <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">MimeMultipart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// create the 1st message body part</span>
<span class="token class-name">MimeBodyPart</span> messageBodyPart <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">MimeBodyPart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Add a plain message (HTML can also be added with setContent)</span>
messageBodyPart<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"Please find the attachment sent using Jakarta Mail"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Add the BodyPart to the Multipart object</span>
multipart<span class="token punctuation">.</span><span class="token function">addBodyPart</span><span class="token punctuation">(</span>messageBodyPart<span class="token punctuation">)</span><span class="token punctuation">;</span>            

<span class="token comment">// 2nd. bodyPart with an attached file</span>
messageBodyPart <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">MimeBodyPart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> filename <span class="token operator">=</span> <span class="token string">"C:/temp/file1.pdf"</span><span class="token punctuation">;</span>
messageBodyPart<span class="token punctuation">.</span><span class="token function">attachFile</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Add the BodyPart to the Multipart object</span>
multipart<span class="token punctuation">.</span><span class="token function">addBodyPart</span><span class="token punctuation">(</span>messageBodyPart<span class="token punctuation">)</span><span class="token punctuation">;</span>            

<span class="token comment">// Add the multipart object to the message</span>
message<span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span>multipart<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Send the message with multipart MIME objects</span>
<span class="token class-name">Transport</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><div class="line-highlight-wrapper">
<div aria-hidden="true" class="line-highlight" data-range="2" data-start="2">
</div></div><div class="line-highlight-wrapper">



<div aria-hidden="true" class="line-highlight" data-range="5" data-start="5">
</div></div><div class="line-highlight-wrapper">







<div aria-hidden="true" class="line-highlight" data-range="9" data-start="9">
</div></div><div class="line-highlight-wrapper">










<div aria-hidden="true" class="line-highlight" data-range="12" data-start="12">
</div></div><div class="line-highlight-wrapper">














<div aria-hidden="true" class="line-highlight" data-range="16" data-start="16">
</div></div><div class="line-highlight-wrapper">

















<div aria-hidden="true" class="line-highlight" data-range="19" data-start="19">
</div></div></pre><h3 id="enviar-correos-electrónicos-html-con-imágenes">Enviar correos electrónicos HTML con imágenes </h3>
<p>Para agregar una imagen a su correo electrónico HTML en Jakarta Mail, puede elegir cualquiera de las tres opciones comunes:</p>
<ul>
<li>Insertando imágenes CID.</li>
<li>Insertando imágenes en línea o codificación Base64.</li>
<li>Enlazando imágenes.</li>
</ul>
<h4 id="insertando-imágenes-cid-content-id">Insertando imágenes CID (Content-ID) </h4>
<p>Para insertar imágenes CID, debemos crear un mensaje <code>MIME multipart/related</code> usando el siguiente código:</p>
<pre data-role="codeBlock" data-info="java{highlight=[2,5,17]}" class="language-java java" data-line="2,5,17"><code><span class="token comment">// 1st part of the message. An HTML code with a CID referenced image</span>
<span class="token class-name">Multipart</span> multipart <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">MimeMultipart</span><span class="token punctuation">(</span><span class="token string">"related"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">MimeBodyPart</span> htmlPart <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">MimeBodyPart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//add reference to your image to the HTML body &lt;img src="cid:some-image-cid" alt="img" /&gt;</span>
<span class="token class-name">String</span> messageBody <span class="token operator">=</span> <span class="token string">"&lt;p&gt;&lt;/p&gt;&lt;img src=\"cid:my-test-image-cid\" alt=\"embedded img\" /&gt;&lt;/p&gt;"</span><span class="token punctuation">;</span>
htmlPart<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>messageBody<span class="token punctuation">,</span> <span class="token string">"utf-8"</span><span class="token punctuation">,</span> <span class="token string">"html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Add the BodyPart to the Multipart object</span>
multipart<span class="token punctuation">.</span><span class="token function">addBodyPart</span><span class="token punctuation">(</span>htmlPart<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 2nd part of the message. The image with special CID header markers</span>
<span class="token class-name">MimeBodyPart</span> imgPart <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">MimeBodyPart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// imageFile is the file containing the image</span>
imgPart<span class="token punctuation">.</span><span class="token function">attachFile</span><span class="token punctuation">(</span>imageFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// or, if the image is in a byte array in memory, use</span>
<span class="token comment">// imgPart.setDataHandler(new DataHandler(</span>
<span class="token comment">//      new ByteArrayDataSource(bytes, "image/whatever")));</span>
imgPart<span class="token punctuation">.</span><span class="token function">setContentID</span><span class="token punctuation">(</span><span class="token string">"&lt;my-test-image-cid&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Add the multipart object to the message</span>
multipart<span class="token punctuation">.</span><span class="token function">addBodyPart</span><span class="token punctuation">(</span>imgPart<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Add the multipart object to the message</span>
message<span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span>multipart<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Send the message with multipart MIME objects</span>
<span class="token class-name">Transport</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><div class="line-highlight-wrapper">
<div aria-hidden="true" class="line-highlight" data-range="2" data-start="2">
</div></div><div class="line-highlight-wrapper">



<div aria-hidden="true" class="line-highlight" data-range="5" data-start="5">
</div></div><div class="line-highlight-wrapper">















<div aria-hidden="true" class="line-highlight" data-range="17" data-start="17">
</div></div></pre><h4 id="insertando-imágenes-en-línea-base64">Insertando imágenes en línea (Base64) </h4>
<p>Para la inserción en línea o la codificación Base64, debe incluir los datos de imagen codificados en el cuerpo HTML de forma similar a esta:</p>
<pre data-role="codeBlock" data-info="html" class="language-html html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>data:image/jpeg;base64,base64-encoded-data-here<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="admonition warning">
<p class="admonition-title">tamaño del HTML</p>
<p>Cada dígito Base64 representa 6 bits de datos, por lo que el código generado para una imagen real será bastante grande.</p>
<p>Como esto afecta el tamaño total del mensaje HTML, es mejor no usar imágenes grandes en línea.</p>
</div>
<p>Para codificar/decodificar una secuencia en Base 64 podemos usar la clase <code>java.util.Base64</code></p>
<pre data-role="codeBlock" data-info="java" class="language-java java"><code><span class="token keyword keyword-byte">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> fileContent <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>imageFile<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">readAllBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> base64EncodedData <span class="token operator">=</span> <span class="token class-name">Base64</span><span class="token punctuation">.</span><span class="token function">getEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">encodeToString</span><span class="token punctuation">(</span>fileContent<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="admonition tip">
<p class="admonition-title">Codificación base64</p>
<p>Base64 es una buena opción para enviar datos binarios a través de protocolos de texto como HTTP, sin pérdida de información.</p>
<p>Esta operación se puede aplicar a cualquier archivo binario. Es útil cuando necesitamos transferir contenido binario en formato JSON, por ejemplo desde la aplicación móvil al endpoint de conexión REST.</p>
<p><a href="https://www.baeldung.com/java-base64-image-string">Image to Base64 String Conversion - Baeldung</a></p>
</div>
<h4 id="linked-images">Linked images </h4>
<p>Por último, tenemos imágenes vinculadas que son esencialmente imágenes alojadas en algún servidor externo al que luego crea un enlace.<br>
Podemos hacerlo usando la etiqueta img en el cuerpo HTML de la siguiente manera.</p>
<pre data-role="codeBlock" data-info="html" class="language-html html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/wp-content/uploads/2018/11/blog/-illustration-email-embedding-images.png<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>img<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="admonition warning">
<p class="admonition-title">Debug Jakarta Mail</p>
<p>La depuración juega un papel fundamental en las pruebas de envío de correo electrónico.</p>
<p>En Jakarta Mail, es bastante sencillo. Tan solo hay que establecer debug a true en las propiedades de configuración de la sesión:</p>
<blockquote>
<p>props.put("mail.debug", "true");</p>
</blockquote>
<p>Como resultado, obtendremos una descripción paso a paso de cómo se ejecuta el código. Si aparece algún problema con el envío del mensaje, comprenderemos instantáneamente lo que ha sucedido y en qué paso.</p>
</div>
<h3 id="lectura-de-emails-con-jakarta-mail">Lectura de emails con Jakarta Mail </h3>
<p>El API de correo de Jakarta también proporciona soporte para leer correos electrónicos. Para leer correos electrónicos, debe usar la clase <code>javax.mail.Store</code>. La clase Store es una clase abstracta que modela un almacén de mensajes y su protocolo de acceso, y es una subclase de las clases <code>POP3Store</code> e <code>IMAPStore</code>.</p>
<p>Leer correos electrónicos almacenados en un servidor IMAP consta de los siguientes pasos:</p>
<ul>
<li>Creación de la sesión IMAP (Session), indicando el protocolo, el nombre del host, el puerto, si usa SSL y el servidor de autenticación asociado.</li>
<li>Configuración y obtención del almacén (Store).</li>
<li>Obtención de la conexión a través del almacén, indicando el identificador de la cuenta y la contraseña.</li>
<li>Obtención de la carpeta a leer.</li>
<li>Apertura de la carpeta.</li>
<li>Obtención de los mensajes</li>
<li>Procesamiento de mensajes</li>
<li>Cierre de la carpeta y del almacén.</li>
<li>Cierre de la sesión y de la conexión</li>
</ul>
<pre data-role="codeBlock" data-info="java" class="language-java java"><code>    <span class="token comment">// Prepare IMAP configuration into a Property object</span>
    <span class="token keyword keyword-final">final</span> <span class="token class-name">Properties</span> prop <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    prop<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"mail.imap.host"</span><span class="token punctuation">,</span> <span class="token string">"imap.gmail.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    prop<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"mail.imap.port"</span><span class="token punctuation">,</span> <span class="token string">"993"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    prop<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"mail.imap.ssl.enable"</span><span class="token punctuation">,</span> <span class="token string">"true"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    prop<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"mail.imap.auth"</span><span class="token punctuation">,</span> <span class="token string">"true"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Create the Session with the user credentials</span>
    <span class="token class-name">Session</span> mailSession <span class="token operator">=</span> <span class="token class-name">Session</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span>prop<span class="token punctuation">,</span> <span class="token keyword keyword-new">new</span> <span class="token class-name"><span class="token namespace">jakarta<span class="token punctuation">.</span>mail<span class="token punctuation">.</span></span>Authenticator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword keyword-protected">protected</span> <span class="token class-name">PasswordAuthentication</span> <span class="token function">getPasswordAuthentication</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword keyword-return">return</span> <span class="token keyword keyword-new">new</span> <span class="token class-name">PasswordAuthentication</span><span class="token punctuation">(</span>prop<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"mail.imap.username"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
                        prop<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"mail.imap.password"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Get the Store object and connect to the current host using the specified username and password.</span>
    <span class="token class-name">Store</span> store <span class="token operator">=</span> mailSession<span class="token punctuation">.</span><span class="token function">getStore</span><span class="token punctuation">(</span><span class="token string">"imap"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    store<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>prop<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"mail.imap.host"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
            prop<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"mail.imap.username"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
            prop<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"mail.imap.password"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Get the folder and open it</span>
    <span class="token class-name">Folder</span> folder <span class="token operator">=</span> store<span class="token punctuation">.</span><span class="token function">getFolder</span><span class="token punctuation">(</span><span class="token string">"INBOX"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    folder<span class="token punctuation">.</span><span class="token keyword keyword-open">open</span><span class="token punctuation">(</span><span class="token class-name">Folder</span><span class="token punctuation">.</span><span class="token constant">READ_ONLY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Get the messages</span>
    <span class="token class-name">Message</span><span class="token punctuation">[</span><span class="token punctuation">]</span> messages <span class="token operator">=</span> folder<span class="token punctuation">.</span><span class="token function">getMessages</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Process the messages</span>
    <span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> messages<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Message</span> message <span class="token operator">=</span> messages<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Message "</span> <span class="token operator">+</span> <span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"From: "</span> <span class="token operator">+</span> message<span class="token punctuation">.</span><span class="token function">getFrom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Subject: "</span> <span class="token operator">+</span> message<span class="token punctuation">.</span><span class="token function">getSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Sent Date: "</span> <span class="token operator">+</span> message<span class="token punctuation">.</span><span class="token function">getSentDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Text: "</span> <span class="token operator">+</span> message<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Close the folder and store objects</span>
    folder<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    store<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
      </div>
      
      
    
    
    
    
    
    
  
    </body></html>